version: '3.8'

services:
  playwright-tests:
    build: .
    volumes:
      - ./test-results:/app/test-results
      - ./playwright-report:/app/playwright-report
    environment:
      - BASE_URL=${BASE_URL:-https://www.saucedemo.com}
      - API_BASE_URL=${API_BASE_URL:-https://airportgap.com/api}
      - ENVIRONMENT=${ENVIRONMENT:-dev}
    command: npm run test

  smoke-tests:
    build: .
    volumes:
      - ./test-results:/app/test-results
      - ./playwright-report:/app/playwright-report
    environment:
      - BASE_URL=${BASE_URL:-https://www.saucedemo.com}
      - API_BASE_URL=${API_BASE_URL:-https://airportgap.com/api}
    command: npm run test:smoke

  api-tests:
    build: .
    volumes:
      - ./test-results:/app/test-results
      - ./playwright-report:/app/playwright-report
    environment:
      - API_BASE_URL=${API_BASE_URL:-https://airportgap.com/api}
    command: npm run test:api

  regression-tests:
    build: .
    volumes:
      - ./test-results:/app/test-results
      - ./playwright-report:/app/playwright-report
    environment:
      - BASE_URL=${BASE_URL:-https://www.saucedemo.com}
      - API_BASE_URL=${API_BASE_URL:-https://airportgap.com/api}
    command: npm run test:regression